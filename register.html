<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOH 2025 - Registrácia</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding-top: 64px; /* Odsadenie pre pevnú hlavičku */
        }
        /* Štýly pre modálne okná */
        .modal {
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            animation: fadeIn 0.3s ease-out;
            max-width: 500px;
            width: 90%;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Štýly pre scrollbar v CountryCodeModal */
        .max-h-80::-webkit-scrollbar {
            width: 8px;
        }
        .max-h-80::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .max-h-80::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        .max-h-80::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body>
    <!-- Hlavička - bude načítaná dynamicky -->
    <div id="header-placeholder"></div>

    <!-- Hlavný obsah React aplikácie -->
    <div id="root"></div>

    <!-- React a ReactDOM - Tieto musia byť načítané pred tvojimi React modulmi -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- ODSTRÁNENÉ: <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script> -->
    <!-- ODSTRÁNENÉ: Staré Firebase SDK script tagy -->

    <!-- reCAPTCHA v3 -->
    <script src="https://www.google.com/recaptcha/api.js?render=6LdJbn8rAAAAAO4C50qXTWva6ePzDlOfYwBDEDwa"></script>

    <!-- Globálne premenné pre Firebase config (pre React aplikácie) -->
    <script type="text/javascript">
        // Tieto premenné sú definované globálne a budú použité v header.js a register.js
        const __app_id = '1:26454452024:web:6954b4f90f87a3a1eb43cd';
        const __firebase_config = JSON.stringify({
            apiKey: "AIzaSyDj_bSTkjrquu1nyIVYW7YLbyBl1pD6YYo",
            authDomain: "prihlasovanie-4f3f3.firebaseapp.com",
            projectId: "prihlasovanie-4f3f3",
            storageBucket: "prihlasovanie-4f3f3.firebasestorage.app",
            messagingSenderId: "26454452024",
            appId: "1:26454452024:web:6954b4f90f87a3a1eb43cd"
        });
        const __initial_auth_token = null; // Pre túto aplikáciu nie je potrebný počiatočný auth token
        const __firebase_app_name = 'headerApp'; // Názov Firebase aplikácie pre hlavičku
    </script>

    <!-- Vlastné skripty - TERAZ S type="module" -->
    <!-- Načítanie komponentov stránok formulára a hlavného App komponentu.
         Poradie je dôležité: Page1Form a Page2Form musia byť definované pred App,
         pretože App ich importuje. -->
    <script type="module" src="register-page1.js"></script>
    <script type="module" src="register-page2.js"></script>
    <script type="module" src="register.js"></script>

    <!-- header.js by mal byť načítaný po definovaní globálnych premenných,
         alebo sa uisti, že jeho logika nezávisí na Reacte alebo Firebase,
         kým nie sú úplne inicializované. Ak header.js používa Firebase,
         mal by tiež importovať Firebase moduly a byť type="module". -->
    <script src="header.js"></script>
    
    <script type="text/javascript">
        // Funkcia na načítanie hlavičky
        async function loadHeader() {
            try {
                const response = await fetch('header.html');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const headerHtml = await response.text();
                document.getElementById('header-placeholder').innerHTML = headerHtml;
            } catch (error) {
                console.error("Chyba pri načítaní hlavičky:", error);
                document.getElementById('header-placeholder').innerHTML = '<div style="color: red; text-align: center; padding: 10px;">Chyba pri načítaní hlavičky.</div>';
            }
        }

        // Spustí sa po načítaní DOM a všetkých skriptov
        window.onload = function() {
            // Načítať hlavičku ako prvú
            loadHeader().then(() => {
                // Po načítaní hlavičky inicializovať jej logiku
                if (typeof initializeHeaderLogic === 'function') {
                    initializeHeaderLogic();
                } else {
                    console.warn("Funkcia initializeHeaderLogic nie je definovaná v header.js.");
                }
                // React aplikácia sa teraz renderuje priamo v register.js po jeho preložení.
            }).catch(error => {
                console.error("Chyba pri inicializácii stránky:", error);
            });
        };
    </script>
</body>
</html>
